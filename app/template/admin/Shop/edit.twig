{#
This file is part of EC-CUBE

Copyright(c) EC-CUBE CO.,LTD. All Rights Reserved.

http://www.ec-cube.co.jp/

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.
#}

{% extends '@admin/default_frame.twig' %}

{% set menus = ['shop', 'shop_edit'] %}

{% block title %}掲載店情報{% endblock %}
{% block sub_title %}掲載店情報確認{% endblock %}

{% form_theme form '@admin/Form/bootstrap_4_horizontal_layout.html.twig' %}

{% block javascript %}

    <script src="{{ asset('assets/js/vendor/fileupload/vendor/jquery.ui.widget.js', 'admin') }}"></script>
    <script src="{{ asset('assets/js/vendor/fileupload/jquery.iframe-transport.js', 'admin') }}"></script>
    <script src="{{ asset('assets/js/vendor/fileupload/jquery.fileupload.js', 'admin') }}"></script>
    <script src="{{ asset('assets/js/vendor/fileupload/jquery.fileupload-process.js', 'admin') }}"></script>
    <script src="{{ asset('assets/js/vendor/fileupload/jquery.fileupload-validate.js', 'admin') }}"></script>
    <script>var bootstrapTooltip = $.fn.tooltip.noConflict();</script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script>
        $.fn.tooltip = bootstrapTooltip;
        $(document).on('drop dragover', function(e) {
            e.preventDefault();
        });
        $(function() {
            var confirmFormChange = function(form, target, modal) {
                var returnLink = form.find('input[type="hidden"][name*="return_link"]'),
                    saveBtn = modal.find('a[data-action="save"]'),
                    cancelBtn = modal.find('a[data-action="cancel"]');
                modal.on('hidden.bs.modal', function() {
                    returnLink.val('');
                });
                saveBtn.on('click', function() {
                    returnLink.val($(this).data('return-link'));
                    $(this).addClass('disabled');
                    form.submit();
                });
                target.on('click', function() {
                    modal.find('.modal-body .screen-name').text($(this).attr('title'));
                    modal.modal('show');
                    saveBtn.data('return-link', $(this).attr('href'));
                    cancelBtn.attr('href', $(this).attr('href'));
                    return false;
                });
            };

            confirmFormChange($('#form1'), $('a[data-action="confirm"]'), $('#confirmFormChangeModal'))
        });

    </script>

{% endblock javascript %}

{% block main %}
    <form name="customer_form" role="form" id="customer_form" method="post" class="h-adr"
          action="{{ url('admin_shop_edit', { id : Shop.id }) }}"
          novalidate>
        <span class="p-country-name" style="display:none;">Japan</span>
        {{ form_widget(form._token) }}
        <div class="c-contentsArea__cols">
            <div class="c-contentsArea__primaryCol">
                <div class="c-primaryCol">
                    <div class="card rounded border-0 mb-4">
                        <div class="card-header">
                            <div class="row">
                                <div class="col-8"><span class="card-title">掲載店情報</span>
                                </div>
                                <div class="col-4 text-right">
                                    <a data-toggle="collapse" href="#ordererInfo"
                                       aria-expanded="false" aria-controls="ordererInfo">
                                        <i class="fa fa-angle-up fa-lg"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="collapse show ec-cardCollapse" id="ordererInfo">
                            <div class="card-body">
                                {% if Shop.id %}
                                    <div class="row mb-2">
                                        <div class="col-3">
                                            <div class="d-inline-block" data-tooltip="true" data-placement="top"
                                                 title="{{ 'tooltip.customer.customer_id'|trans }}">
                                                <span>店舗情報</span>
                                                <i class="fa fa-question-circle fa-lg ml-1"></i>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <p>{{ Shop.id }}</p>
                                        </div>
                                    </div>
                                {% endif %}
                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>店舗名</span>
                                        <span class="badge badge-primary ml-1">{{ 'admin.common.required'|trans }}</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.name) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.name) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>サブ店舗名</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.sub_name) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.sub_name) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>担当者名</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.person_in_charge) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.person_in_charge) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>業種</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.industry_type) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.industry_type) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>郵便番号</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.post_code) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.post_code) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>都道府県</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.mtb_pref_id) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.mtb_pref_id) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>住所</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.address) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.address) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>電話番号</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.telephone) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.telephone) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>メールアドレス</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.email) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.email) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>URL</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.url) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.url) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>


                    <div class="card rounded border-0 mb-4">
                        <div class="card-header">
                            <div class="row">
                                <div class="col-8"><span class="card-title">掲載点詳細情報</span>
                                </div>
                                <div class="col-4 text-right">
                                    <a data-toggle="collapse" href="#ordererInfo"
                                       aria-expanded="false" aria-controls="ordererInfo">
                                        <i class="fa fa-angle-up fa-lg"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="collapse show ec-cardCollapse" id="ordererInfo">
                            <div class="card-body">

                                {%
                                    include
                                        "Subview/one_image_upload.twig" with
                                        {
                                            "field_name": "logo",
                                            "form": form,
                                            "image_url": url("admin_shop_image_add", {"field_name": "logo"})
                                        }

                                %}


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>アクセス・道案内</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.access) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.access) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>クレジットカード</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.credit_cards_info) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.credit_cards_info) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>カット値段</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.price) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.price) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>席数</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.seats) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.seats) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>スタッフ数</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.staff_number) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.staff_number) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>駐車場</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.parking_area) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.parking_area) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row mb-2">
                                    <div class="col-3">
                                        <span>こだわり条件</span>
                                    </div>
                                    <div class="col">
                                        <div class="row">
                                            <div class="col">
                                                {{ form_widget(form.conditions) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                {{ form_errors(form.conditions) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>







                                {#<script>#}
                                    {#$(function() {#}
                                        {#// Todo: fix drag&drop style#}
                                        {#$("#thumb").sortable({#}
                                            {#cursor: 'move',#}
                                            {#opacity: 0.7,#}
                                            {#placeholder: 'ui-state-highlight',#}
                                            {#update: function(event, ui) {#}
                                                {#updateSortNo();#}
                                            {#}#}
                                        {#});#}



                                        {#var proto_img = '<div class="c-form__fileUploadThumbnail" style="background-image:url(\'__path__\');">' +#}
                                            {#'<a class="delete-image"><i class="fa fa-times" aria-hidden="true"></i></a>' +#}
                                            {#'</div>';#}
                                        {#var proto_add = '{{ form_widget(form.add_images.vars.prototype) }}';#}
                                        {#var proto_del = '{{ form_widget(form.delete_images.vars.prototype) }}';#}

                                        {#{% for image in form.logo_image %}#}
                                        {#var $img = $(proto_img.replace(/__path__/g, '{{ asset(image.vars.value, 'save_image') }}'));#}
                                        {#var $widget = $('{{ form_widget(image) }}');#}
                                        {#$widget.val('{{ image.vars.value }}');#}
                                        {#$("#thumb").append($img.append($widget));#}
                                        {#{% endfor %}#}

                                        {#{% for add_image in form.add_images %}#}
                                        {#var $img = $(proto_img.replace(/__path__/g, '{{ asset(add_image.vars.value, 'temp_image') }}'));#}
                                        {#var $widget = $('{{ form_widget(add_image) }}');#}
                                        {#$widget.val('{{ add_image.vars.value }}');#}
                                        {#$("#thumb").append($img.append($widget));#}
                                        {#{% endfor %}#}

                                        {#{% for delete_image in form.delete_images %}#}
                                        {#$("#thumb").append('{{ form_widget(delete_image) }}');#}
                                        {#{% endfor %}#}
                                        {#var hideThumbnail = function() {#}
                                            {#if ($("#thumb div").length > 0) {#}
                                                {#$("#icon_no_image").css("display", "none");#}
                                                {#$('#message').html("{{ 'admin.common.drag_and_drop_description'|trans }}");#}
                                            {#} else {#}
                                                {#$("#icon_no_image").css("display", "");#}
                                                {#$('#message').empty();#}
                                            {#}#}
                                        {#};#}

                                        {#// Todo: fix update sort by drag&drop#}
                                        {#var updateSortNo = function() {#}
                                            {#$("#thumb div").each(function(index) {#}
                                                {#$(this).find(".sort_no_images").remove();#}
                                                {#filename = $(this).find("input[type='hidden']").val();#}
                                                {#$sortNo = $('<input type="hidden" class="sort_no_images" name="sort_no_images[]" />');#}
                                                {#$sortNo.val(filename + '//' + parseInt(index + 1));#}
                                                {#$(this).append($sortNo);#}
                                            {#});#}
                                        {#};#}
                                        {#hideThumbnail();#}
                                        {#updateSortNo();#}
                                        {#// Delete of images#}
                                        {#var count_del = 0;#}
                                        {#$("#thumb").on("click", '.delete-image', function() {#}
                                            {#var $new_delete_image = $(proto_del.replace(/__name__/g, count_del));#}
                                            {#var thumbnail = $(this).parents('div.c-form__fileUploadThumbnail');#}
                                            {#var src = $(thumbnail).find('input').val();#}
                                            {#$new_delete_image.val(src);#}
                                            {#$("#thumb").append($new_delete_image);#}
                                            {#$(thumbnail).remove();#}
                                            {#hideThumbnail();#}
                                            {#updateSortNo();#}
                                            {#count_del++;#}
                                        {#});#}

                                        {#var count_add = {{ form.add_images|length|default(0) }};#}
                                        {#$('#{{ form.logo_image.vars.id }}').fileupload({#}
                                            {#url: "{{ url('admin_shop_logo_image_add') }}",#}
                                            {#type: "post",#}
                                            {#sequentialUploads: true,#}
                                            {#dataType: 'json',#}
                                            {#dropZone: $('#upload-zone'),#}
                                            {#done: function(e, data) {#}
                                                {#$('.progress').hide();#}
                                                {#$.each(data.result.files, function(index, file) {#}
                                                    {#var path = '{{ asset('', 'temp_image') }}' + file;#}
                                                    {#var $img = $(proto_img.replace(/__path__/g, path));#}
                                                    {#var $new_img = $(proto_add.replace(/__name__/g, count_add));#}
                                                    {#$new_img.val(file);#}
                                                    {#$child = $img.append($new_img);#}
                                                    {#$('#thumb').empty();#}
                                                    {#$('#thumb').append($child);#}
                                                    {#count_add++;#}
                                                {#});#}
                                                {#hideThumbnail();#}
                                                {#updateSortNo();#}
                                            {#},#}
                                            {#fail: function(e, data) {#}
                                                {#alert("{{ 'admin.common.upload_error'|trans }}");#}
                                            {#},#}
                                            {#always: function(e, data) {#}
                                                {#$('.progress').hide();#}
                                                {#$('.progress .progress-bar').width('0%');#}
                                            {#},#}
                                            {#start: function(e, data) {#}
                                                {#$('.progress').show();#}
                                            {#},#}
                                            {#acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,#}
                                            {#maxFileSize: 10000000,#}
                                            {#maxNumberOfFiles: 10,#}
                                            {#progressall: function(e, data) {#}
                                                {#var progress = parseInt(data.loaded / data.total * 100, 10);#}
                                                {#$('.progress .progress-bar').css(#}
                                                    {#'width',#}
                                                    {#progress + '%'#}
                                                {#);#}
                                            {#},#}
                                            {#processalways: function(e, data) {#}
                                                {#if (data.files.error) {#}
                                                    {#alert("{{ 'admin.common.upload_error'|trans }}");#}
                                                {#}#}
                                            {#}#}
                                        {#});#}
                                        {#// 画像アップロード#}
                                        {#$('#file_upload').on('click', function() {#}
                                            {#$('#{{ form.logo_image.vars.id }}').click();#}
                                        {#});#}



                                        {#var confirmFormChange = function(form, target, modal) {#}
                                            {#var returnLink = form.find('input[type="hidden"][name*="return_link"]'),#}
                                                {#saveBtn = modal.find('a[data-action="save"]'),#}
                                                {#cancelBtn = modal.find('a[data-action="cancel"]');#}
                                            {#modal.on('hidden.bs.modal', function() {#}
                                                {#returnLink.val('');#}
                                            {#});#}
                                            {#saveBtn.on('click', function() {#}
                                                {#returnLink.val($(this).data('return-link'));#}
                                                {#$(this).addClass('disabled');#}
                                                {#form.submit();#}
                                            {#});#}
                                            {#target.on('click', function() {#}
                                                {#modal.find('.modal-body .screen-name').text($(this).attr('title'));#}
                                                {#modal.modal('show');#}
                                                {#saveBtn.data('return-link', $(this).attr('href'));#}
                                                {#cancelBtn.attr('href', $(this).attr('href'));#}
                                                {#return false;#}
                                            {#});#}
                                        {#};#}

                                        {#confirmFormChange($('#form1'), $('a[data-action="confirm"]'), $('#confirmFormChangeModal'))#}
                                    {#});#}
                                {#</script>#}
                                {#<div class="row">#}
                                    {#<div class="col-3">#}
                                        {#<div class="d-inline-block" data-tooltip="true" data-placement="top" title="ロゴ">#}
                                            {#<span>ロゴ</span>#}
                                            {#<i class="fa fa-question-circle fa-lg ml-1"></i>#}
                                            {#<br>{{ 'admin.product.image_size'|trans }}#}
                                        {#</div>#}
                                    {#</div>#}
                                    {#<div class="col mb-2">#}
                                        {#<div class="progress" style="display: none;">#}
                                            {#<div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>#}
                                        {#</div>#}
                                        {#<div id="thumb" class="c-form__fileUploadThumbnails clearfix"></div>#}
                                        {#<p id="message"></p>#}
                                        {#<div id="upload-zone" class="media py-5 border-ec-dashed mb-2 rounded">#}
                                            {#<div class="media-body">#}
                                                {#<i class="fa fa-cloud-upload fa-3x text-ec-lightGray mx-3 align-middle" aria-hidden="true"></i>#}
                                                {#{{ 'admin.common.drag_and_drop_image_description'|trans }}#}
                                                {#{{ form_widget(form.logo_image, { attr : { accept : 'image/*', style : 'display:none;' } }) }}#}
                                                {#{{ form_errors(form.logo_image) }}#}
                                                {#<a class="btn btn-ec-regular mr-2" onclick="$('#admin_shop_logo_image').click()">#}
                                                    {#{{ 'admin.common.file_select'|trans }}#}
                                                {#</a>#}
                                            {#</div><!-- /.media-body -->#}
                                        {#</div><!-- /.media -->#}
                                    {#</div>#}
                                {#</div>#}


                            </div>
                        </div>
                    </div>

                    {#{% if Shop.id %}#}
                        {#<div class="card rounded border-0 mb-4">#}
                            {#<div class="card-header">#}
                                {#<div class="row">#}
                                    {#<div class="col-8">#}
                                        {#<div class="d-inline-block" data-tooltip="true" data-placement="top"#}
                                             {#title="{{ 'tooltip.customer.customer_address'|trans }}">#}
                                        {#<span class="card-title">#}
                                            {#{{ 'admin.customer.customer_address'|trans }}#}
                                            {#<i class="fa fa-question-circle fa-lg ml-1"></i>#}
                                        {#</span>#}
                                        {#</div>#}
                                    {#</div>#}
                                    {#<div class="col-4 text-right">#}
                                        {#<a data-toggle="collapse" href="#delivery" aria-expanded="false"#}
                                           {#aria-controls="delivery">#}
                                            {#<i class="fa fa-angle-up fa-lg"></i>#}
                                        {#</a>#}
                                    {#</div>#}
                                {#</div>#}
                            {#</div>#}
                            {#<div class="collapse show ec-cardCollapse" id="delivery">#}
                                {#{% if Customer.CustomerAddresses|length > 0 %}#}
                                    {#<div class="card-body">#}
                                        {#<table class="table table-striped table-sm">#}
                                            {#<thead class="table-active">#}
                                            {#<th class="align-middle pt-2 pb-2">{{ 'admin.common.name'|trans }}</th>#}
                                            {#<th class="align-middle pt-2 pb-2">{{ 'admin.common.address'|trans }}</th>#}
                                            {#<th class="align-middle pt-2 pb-2 pr-3">{{ 'admin.common.phone_number'|trans }}</th>#}
                                            {#<th class="align-middle pt-2 pb-2 pr-3"></th>#}
                                            {#</thead>#}
                                            {#<tbody>#}
                                            {#{% for CustomerAddress in Customer.CustomerAddresses %}#}
                                                {#<tr>#}
                                                    {#<td class="align-middle">#}
                                                        {#{{ CustomerAddress.name01 }}&nbsp;{{ CustomerAddress.name02 }}#}
                                                    {#</td>#}
                                                    {#<td class="align-middle">#}
                                                        {#<a href="{{ url('admin_customer_delivery_edit', { 'id': Customer.id, 'did': CustomerAddress.id }) }}">#}
                                                            {#{{ 'admin.common.postal_symbol'|trans }}{{ CustomerAddress.postal_code }} {{ CustomerAddress.Pref }}{{ CustomerAddress.addr01 }}{{ CustomerAddress.addr02 }}#}
                                                        {#</a>#}
                                                    {#</td>#}
                                                    {#<td class="align-middle">#}
                                                        {#{{ CustomerAddress.phone_number }}#}
                                                    {#</td>#}
                                                    {#<td>#}
                                                        {#<div class="text-center" data-tooltip="true" data-placement="top" title="{{ 'admin.common.delete'|trans }}">#}
                                                            {#<a class="btn btn-ec-actionIcon" data-toggle="modal"#}
                                                               {#data-target="#discontinuance-{{ CustomerAddress.id }}">#}
                                                                {#<i class="fa fa-close text-secondary"#}
                                                                   {#aria-hidden="true"></i>#}
                                                            {#</a>#}
                                                        {#</div>#}
                                                        {#<div class="modal fade" id="discontinuance-{{ CustomerAddress.id }}" tabindex="-1" role="dialog" aria-labelledby="discontinuance" aria-hidden="true">#}
                                                            {#<div class="modal-dialog" role="document">#}
                                                                {#<div class="modal-content">#}
                                                                    {#<div class="modal-header">#}
                                                                        {#<h5 class="modal-title font-weight-bold">#}
                                                                            {#{{ 'admin.common.delete_modal__title'|trans }}</h5>#}
                                                                        {#<button class="close" type="button" data-dismiss="modal" aria-label="Close">#}
                                                                            {#<span aria-hidden="true">×</span>#}
                                                                        {#</button>#}
                                                                    {#</div>#}
                                                                    {#<div class="modal-body text-left">#}
                                                                        {#<p class="text-left">#}
                                                                            {#{{ 'admin.common.delete_modal__message'|trans({ '%name%' : 'admin.common.postal_symbol'|trans ~ CustomerAddress.postal_code ~ CustomerAddress.Pref ~ ' ' ~ CustomerAddress.name01 ~ CustomerAddress.name02 }) }}</p>#}
                                                                    {#</div>#}
                                                                    {#<div class="modal-footer">#}
                                                                        {#<button class="btn btn-ec-sub" type="button" data-dismiss="modal">#}
                                                                            {#{{ 'admin.common.cancel'|trans }}#}
                                                                        {#</button>#}
                                                                        {#<a href="{{ url('admin_customer_delivery_delete', {'id' : Customer.id, 'did':  CustomerAddress.id}) }}" class="btn btn-ec-delete"{{ csrf_token_for_anchor() }} data-method="delete" data-confirm="false">#}
                                                                            {#{{ 'admin.common.delete'|trans }}#}
                                                                        {#</a>#}
                                                                    {#</div>#}
                                                                {#</div>#}
                                                            {#</div>#}
                                                        {#</div>#}
                                                    {#</td>#}
                                                {#</tr>#}
                                            {#{% endfor %}#}
                                            {#</tbody>#}
                                        {#</table>#}

                                        {# TODO: 新規追加ボタンと文言のデザインを整える #}
                                        {#{% if Customer.CustomerAddresses|length < eccube_config.eccube_deliv_addr_max %}#}
                                            {#<div class="d-block text-center">#}
                                                {#<a href="{{ url('admin_customer_delivery_new', { id: Customer.id }) }}"#}
                                                   {#class="btn btn-ec-regular">{{ 'admin.customer.customer_address__add'|trans }}</a>#}
                                            {#</div>#}
                                        {#{% else %}#}
                                            {#<span class="ec-errorMessage">#}
                                                {#{{ 'admin.customer.customer_address_count_is_over'|trans({"%eccube_deliv_addr_max%":eccube_config.eccube_deliv_addr_max}) }}#}
                                            {#</span>#}
                                        {#{% endif %}#}
                                    {#</div>#}
                                {#{% else %}#}
                                    {#<div class="card-body">#}
                                        {#<div id="address_box" class="data-empty">#}
                                            {#<span>{{ 'admin.customer.no_customer_address'|trans }}</span>#}
                                        {#</div>#}

                                        {#<div class="d-block text-center">#}
                                            {#<a href="{{ url('admin_customer_delivery_new', { id: Customer.id }) }}"#}
                                               {#class="btn btn-ec-regular">{{ 'admin.customer.customer_address__add'|trans }}</a>#}
                                        {#</div>#}

                                    {#</div>#}
                                {#{% endif %}#}
                            {#</div>#}
                        {#</div>#}
                    {#{% endif %}#}

                    {#{% if Customer.id %}#}
                        {#<div class="card rounded border-0 mb-4">#}
                            {#<div class="card-header">#}
                                {#<div class="row">#}
                                    {#<div class="col-8">#}
                                        {#<div class="d-inline-block" data-tooltip="true" data-placement="top"#}
                                             {#title="{{ 'tooltip.customer.purchase_history'|trans }}">#}
                                        {#<span class="card-title">#}
                                            {#{{ 'admin.customer.purchase_history'|trans }}#}
                                            {#<i class="fa fa-question-circle fa-lg ml-1"></i>#}
                                        {#</span>#}
                                        {#</div>#}
                                    {#</div>#}
                                    {#<div class="col-4 text-right">#}
                                        {#<a data-toggle="collapse" href="#orderHistory" aria-expanded="false"#}
                                           {#aria-controls="orderHistory">#}
                                            {#<i class="fa fa-angle-up fa-lg"></i>#}
                                        {#</a>#}
                                    {#</div>#}
                                {#</div>#}
                            {#</div>#}
                            {#<div class="collapse show ec-cardCollapse" id="orderHistory">#}
                                {#{% if Customer.Orders|length > 0 %}#}
                                    {#<div class="card-body">#}
                                        {#<table class="table table-striped table-sm">#}
                                            {#<thead class="table-active">#}
                                            {#<th class="align-middle pt-2 pb-2 pl-3">{{ 'admin.order.order_date'|trans }}</th>#}
                                            {#<th class="align-middle pt-2 pb-2">{{ 'admin.order.order_no'|trans }}</th>#}
                                            {#<th class="align-middle pt-2 pb-2">{{ 'admin.order.purchase_price'|trans }}</th>#}
                                            {#<th class="align-middle pt-2 pb-2 pr-3">{{ 'admin.order.order_status'|trans }}</th>#}
                                            {#</thead>#}
                                            {#<tbody>#}
                                            {#{% for Order in Customer.Orders %}#}
                                                {#<tr>#}
                                                    {#<td class="align-middle pl-3">{{ Order.order_date|date_min }}</td>#}
                                                    {#<td class="align-middle">#}
                                                        {#<a href="{{ url('admin_order_edit', { 'id' : Order.id }) }}">#}
                                                            {#{{ Order.order_no }}#}
                                                        {#</a>#}
                                                    {#</td>#}
                                                    {#<td class="align-middle">{{ Order.total|price }}</td>#}
                                                    {#<td class="align-middle pr-3">#}
                                                        {#<span class="badge badge-ec-blue" style="background-color: #fff; color: {{ Order.OrderStatusColor }}; border-color: {{ Order.OrderStatusColor }}">{{ Order.OrderStatus }}</span>#}
                                                    {#</td>#}
                                                {#</tr>#}
                                            {#{% endfor %}#}
                                            {#</tbody>#}
                                        {#</table>#}
                                    {#</div>#}
                                {#{% else %}#}
                                    {#<div class="card-body">#}
                                        {#<div id="history_box" class="data-empty">#}
                                        {#<span>#}
                                            {#{{ 'admin.customer.no_purchase_history'|trans }}#}
                                        {#</span>#}
                                        {#</div>#}
                                    {#</div>#}
                                {#{% endif %}#}
                            {#</div>#}
                        {#</div>#}
                    {#{% endif %}#}

                    <div class="card rounded border-0 mb-4">
                        <div class="card-header">
                            <div class="row">
                                <div class="col-8">
                                    <div class="d-inline-block" data-tooltip="true" data-placement="top"
                                         title="{{ 'tooltip.customer.shop_memo'|trans }}">
                                        <span class="card-title">{{ 'admin.common.shop_memo'|trans }}</span>
                                        <i class="fa fa-question-circle fa-lg ml-1"></i>
                                    </div>
                                </div>
                                <div class="col-4 text-right">
                                    <a data-toggle="collapse" href="#shopMemo" aria-expanded="false"
                                       aria-controls="shopMemo">
                                        <i class="fa fa-angle-up fa-lg"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="collapse show ec-cardCollapse" id="shopMemo">
                            <div class="card-body">
                                {{ form_widget(form.memo, { 'attr': { 'row': 8 }}) }}
                                {{ form_errors(form.memo) }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="c-conversionArea">
            <div class="c-conversionArea__container">
                <div class="row justify-content-between align-items-center">
                    <div class="col-6">
                        <div class="c-conversionArea__leftBlockItem">
                            <a class="c-baseLink"
                               href="{{ url('admin_shop_page', { page_no : app.session.get('eccube.admin.customer.search.page_no')|default('1') } ) }}?resume=1">
                                <i class="fa fa-backward" aria-hidden="true"></i>
                                <span>掲載店一覧</span>
                            </a>
                        </div>
                    </div>
                    <div class="col-6">
                        <div id="ex-conversion-action" class="row align-items-center justify-content-end">
                            {#<div class="col-auto">#}
                                {#{{ form_widget(form.status) }}#}
                                {#{{ form_errors(form.status) }}#}
                            {#</div>#}
                            <div class="col-auto">
                                <button class="btn btn-ec-conversion px-5"
                                        type="submit">{{ 'admin.common.registration'|trans }}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
{% endblock %}
